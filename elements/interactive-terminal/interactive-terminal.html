<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js"></script>
<script src="./history.js"></script>
<script src="./killring.js"></script>
<script src="./readline.js"></script>
<script src="./input.js"></script>
<script src="./shell.js"></script>
<script src="./pathhandler.js"></script>
<!--<script src="./example.js"></script>-->

<dom-module id="interactive-terminal">

    <template>
        <style>
             :host {
                display: block;
                position: absolute;
                left: 0;
                top: 0;
                height: 100%;
                width: 100%;
            }
            
        </style>
        <!--<p>20:45> ./helloWorld</p>-->


        </div>
    </template>

    <script>
        class interactiveTerminal extends Polymer.Element {
            static get is() { return "interactive-terminal"; }

            // configure the owner property
            static get properties() {
                return {
                    name: {
                        type: String,
                        value: 'Daniel'
                    }
                };
            }

            connectedCallback () {
                super.connectedCallback();
                var history = new Josh.History();
                // var killring = new Josh.KillRing();
                // var readline = new Josh.ReadLine({history: history, killring: killring});
                // var shell = Josh.Shell({readline: readline, history: history});
                var shell = Josh.Shell({history: history, blinktime: 600});

                // Prompt matches one in .dotfiles
                shell.onNewPrompt(function(callback) {
                    var now = new Date();
                    var prompt = "<span style='color:#6c71c4;'>";
                    prompt += ("0" + now.getHours()).slice(-2);
                    prompt += ":";
                    prompt += ("0" + now.getMinutes()).slice(-2);
                    prompt += "</span>"
                    prompt += "<span style='color:#cb4b16;font-weight:bold;'>"
                    prompt += ">"
                    prompt += "</span>"
                    callback(prompt);
                });

                shell.setCommandHandler("whoami", {
                    exec: function(cmd, args, callback) {
                        var arg = args[0] || '';
                        var response = "sawaiz"
                        callback(response);
                    }
                });

                shell.activate();
            }

        }
        customElements.define(interactiveTerminal.is, interactiveTerminal);
    </script>

</dom-module>